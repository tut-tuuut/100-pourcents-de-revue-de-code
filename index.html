<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>100 % de revue de code</title>

		<meta name="description" content="Retour d'expérience sur les pull requests chez TEA">
		<meta name="author" content="Agnès Haasser">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/serif.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>100 % de revue de code</h1>
					<p>
						<small><a href="http://tut-tuuut.github.io/">Agnès Haasser</a> / <a href="http://twitter.com/tut_tuuut">@tut_tuuut</a></small>
					</p>
					<aside class="notes">
						Objectif de la conférence : donner un retour d'expérience sur la revue de code chez TEA, comparer avec mes autres expériences de revue de code. Vous donner envie de faire "bien", non seulement de faire de la revue de code mais aussi d'utiliser git. (Ou n'importe quel gestionnaire de version qui marche d'ailleurs…)
					</aside>
				</section>

				<section>
					<h1>0 %</h1>
					<aside class="notes">
						Où est-ce qu'on a 0 % de revue de code ? À l'école ? 
					</aside>
				</section>

				<section>
					<h2>Zéro pourcent de revue de code ?</h2>
					<ul>
						<li>À l'école ?</li>
					</ul>
				</section>

				<section>
					<h1>5 %</h1>
					<aside class="notes">
						Ma première revue de code
					</aside>
				</section>

				<section>
					<h2>Ma première revue de code en SSII</h2>
					<ul>
						<li>Faite par le DT à partir de code commité sur une branche spécifique.</li>
						<li>J'ai appris plein de trucs !</li>
					</ul>
					<aside class="notes">
						<ul>
						<li>Contexte : j'étais stagiaire dans une SSII…</li>
						<li>On nous a demandé, à moi et aux autres stagiaires, de commiter sur une branche (SVN) spécifique.</li>
						<li>Le directeur technique (= le plus gros expert de la direction technique, une pointure) a relu le code et donné des conseils et des compliments sur celui-ci.</li>
						<li>Après correction, le code a été fusionné avec la branche qui partait en prod. Et nous avons commité la suite du code sur la branche master.</li>
					</ul>
					</aside>
				</section>

				<section>
					<h2>Ma première revue de code en SSII</h2>
					<ul>
						<li>Jamais renouvelée… Pourquoi ?</li>
						<li>Parce que DT très occupé avec ses plusieurs centaines de dévloppeurs à diriger.</li>
					</ul>
				</section>

				<section>
					<h2>La revue de code par le directeur technique</h2>
					<table class="compare">
						<thead>
							<tr>
								<th>+</th>
								<th>–</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Conseils uniformes</td>
								<td>Nombre de DT limité</td>
							</tr>
							<tr>
								<td>Conseils avisés</td>
								<td>Une seule source de connaissance</td>
							</tr>
						</tbody>
					</table>
				</section>

				<section>
					<h1>20 %</h1>
					<aside class="notes">
						Changement de contexte et de style de revue de code
					</aside>
				</section>

				<section>
					<h2>Chez TEA, en 2013</h2>
					<ul>
						<li>Pas de direction technique : juste une équipe de 10 techniciens avec des affinités différentes… mais qui peuvent intervenir sur n'importe lequel de nos différents projets.</li>
						<li>Et si on partageait les connaissances entre nous, sans sous-entendre que certains savent tout et d'autres rien ?</li>
						<li>La connaissance circule entre développeurs, pas juste des DT vers les dev.</li>
						<li>ANARCHIE</li>
					</ul>
				</section>

				<section>
					<h2>Contexte « touffu » (1)</h2>
					<ul>
						<li>TEA, <i>the ebook alternative</i></li>
						<li>[montrer une liseuse]</li>
						<li>Plein de technologies différentes : bash, Ruby, PHP, JS, HTML, CSS, MySQL, Mongo, Redis</li>
						<li>8 développeurs dont 6 full-stack</li>
						<li>29 projets (!)</li>
					</ul>
					<aside class="notes">
						On a beaucoup de techno différentes et de développeurs compétents sur plusieurs sujets à la fois. Forcément on a plus d'affinités sur certains sujets que sur d'autres.
					</aside>
				</section>

				<section>
					<h2>Contexte « touffu » (2)</h2>
					<ul>
						<li>Tout le code est versionné sur git : on a pris l'habitude il y a bien longtemps (début 2012) de créer une branche par développement.</li>
						<li>Déploiement des sources sur les serveurs avec capistrano</li>
						<li>Travail en SCRUM avec des sprints de 2 semaines (6 développeurs dans les sprints, 2 hors sprint)</li>
					</ul>
				</section>

				<section>
					<h2>Revue de code par « croisement » à l'oral avec un collègue</h2>
					<ul>
						<li>Avant de commencer une tâche : on explique à un collègue comment on compte faire.</li>
						<li>Avant de marquer une tâche comme finie : on explique à un collègue comment on a fait en lui montrant les bouts de code « intéressants ».</li>
						<li>Pendant la tâche, en cas de problème ou de question : on explique où on en est et ce qu'on veut faire.</li>
					</ul>
					<blockquote>
						Quelqu'un veut croiser ?
					</blockquote>
				</section>

				<section>
					<h2>Revue de code par « croisement »</h2>
					<ul>
						<li>Petit effet « canard en plastique » qui débloque de temps en temps.</li>
						<li>Détection de certains bugs ou écarts aux conventions.</li>
						<li>Partage de connaissances (apprentissage) et d'informations (cette modif est passée en prod) entre les deux collègues qui interviennent.</li>
					</ul>
				</section>

				<section>
					<h2>Revue de code par « croisement »</h2>
					<ul>
						<li>Inconvénients : ne permet pas toujours de débloquer ni de détecter les bugs (on a juste la vision de 2 personnes).</li>
						<li>La circulation d'infos et de connaissances est limitée à 2 personnes : au mieux on se répète, au pire le reste de l'équipe ignore.</li>
						<li>La personne avec qui on croise doit s'interrompre dans sa tâche. Au final c'est la disponibilité à un moment donné qui est le critère pour choisir le collègue avec qui on croise.</li>
						<li>Avantages : c'est régulier, ça devient vite un réflexe (« qui n'a pas croisé en fin de tâche ? »). Facile à faire : on a toujours au moins un collègue à dispo.</li>
					</ul>
				</section>

				<section>
					<h2>La revue de code par <em>pull request</em></h2>
					<h3>1. Ouvrir une <em>pull request</em></h3>
					<ul>
						<li>Tartempion crée une branche git et commite son bazar.
<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
git checkout -b devel/display-customer-name
git add -p # choose which parts of files you add
git commit # write a beautiful commit message</code></pre>
						</li>
						<li>Tartempion push sa branche sur le dépôt partagé sur Github.
							<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
git push origin devel/display-customer-name</code></pre>
						</li>
						<li>Tartempion clique sur le bouton « open pull request » sur Github</li>
					</ul>
				</section>
				<section>
					<h2>La revue de code par <em>pull request</em></h2>
					<h3>2. La revue de code</em></h3>
					<ul>
						<li>Toto et Tata lisent sur l'interface web le code modifié par Tartempion.</li>
						<li>Ils font des commentaires constructifs…</li>
						<li>…ou pas.</li>
						<li>…et Tata prend des screenshots pour sa conférence Paris Web.</li>
					</ul>
				</section>
				<section>
					<h2>La revue de code par PR</h2>
					<h3>3. La validation de la PR</h3>
					<ul>
						<li>Quand au moins 2 personnes ont validé la PR</li>
						<li>Si les remarques importantes et les bugs potentiels ont été pris en compte</li>
					</ul>
				</section>

				<section>
					<h2>Exemples de trucs qu'on remarque grâce à une PR</h2>
					<blockquote>
						Tiens, ça marche de faire le <code>DROP TABLE</code> avant de supprimer les contraintes de clés étrangères ?
					</blockquote>
					<p>=> Script de migration réparé avant la mise en prod
				</section>

				<section>
					<h2>Exemple de truc que la PR n'a pas permis de remarquer</h2>
					<blockquote>
						Tiens, quand je télécharge le fichier, il s'appelle <code>la-duchesse-insoumise.acsm.acsm</code>. Pourquoi j'ai deux fois l'extension tout à coup ?
					</blockquote>
					<p>=> Les clients ont téléchargé des fichiers nommés bizarrement pendant une journée.
				</section>

				<section>
					<h2>Je &lt;3 les PR</h2>
					<table class="compare">
						<thead>
							<tr>
								<td>+</td>
								<td>–</td>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Partage des connaissances</td>
								<td>Tendance à moins croiser</td>
							</tr>
							<tr>
								<td>Partage des informations</td>
								<td>On ne détecte pas tous les bugs.</td>
							</tr>
						</tbody>
					</table>
				</section>

				<section>
					<h2>Test dessin</h2>
					<img src="img/101203.png" alt="youpi">
				</section>

				<section>
					<img src="img/130711b.png" alt="youpi">
				</section>

				<section>
					<img src="img/101203.png" alt="youpi">
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
